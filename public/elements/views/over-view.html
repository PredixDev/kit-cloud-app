<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/px-card/px-card.html">
<link rel="import" href="../../bower_components/px-modal/px-modal.html">
<link rel="import" href="../../bower_components/px-dropdown/px-dropdown.html">
<link rel="import" href="../../bower_components/px-dropdown/px-dropdown-content.html">

<dom-module id="over-view">
  <style>
    :root {
      --overlay-background-rgb: rgb(58, 180, 212);
      --overlay-background-hex: #2886af;
      --mouseover-background: #fff5cc;
      --mouseover-halo: rgba(58, 180, 212, 0.3);
    }

    .component-mouseover {
      border-radius: 44px;
      position: absolute;
      background-color: rgba(255, 255, 255, 0.05);
      width: 88px;
      height: 88px;
    }

    #assetSelectionContainer {
      position: absolute;
      background-color: rgba(255, 255, 255, 0);
      width: 120px;
      height: 105px;
    }

    #assetSelectionImage {
      height: 88px;
      margin-top: 5px;
      margin-left: -5px;
    }

    .component-mouseover:hover {
      box-shadow: 0 0 6px 18px var(--mouseover-halo);
      cursor: pointer;
    }

    .overlay {
      position: absolute;
      width: 390px;
      height: 160px;
    }

    .overlay-tip-up {
      position: absolute;
    	width: 0;
    	height: 0;
      top: -9px;
      left: 165px;
    	border-left: 20px solid transparent;
    	border-right: 20px solid transparent;
    	border-bottom: 20px solid var(--mouseover-background);
    }

    .overlay-tip-down {
      position: absolute;
    	width: 0;
    	height: 0;
      top: 139px;
      left: 165px;
    	border-left: 20px solid transparent;
    	border-right: 20px solid transparent;
    	border-top: 20px solid var(--mouseover-background);
    }

    .overlay-tip-right {
      position: absolute;
    	width: 0;
    	height: 0;
      top: 50px;
      left: 359px;
    	border-top: 20px solid transparent;
    	border-bottom: 20px solid transparent;
    	border-left: 20px solid var(--mouseover-background);
    }

    .overlay-tip-left {
      position: absolute;
    	width: 0;
    	height: 0;
      left: -9px;
      top: 50px;
    	border-top: 20px solid transparent;
    	border-bottom: 20px solid transparent;
    	border-right: 20px solid var(--mouseover-background);
    }

    .overlay-shell {
      width: 370px;
      border: 10px solid transparent;
      position: relative;
    }

    .overlay-body {
      position: absolute;
      width: 350px;
      top: 10px;
      left: 10px;
      border: 0;
      background-color: var(--mouseover-background);
      border-radius: 8px;
      color: #012939;
      font-size: 14px;
    }

    .text-container {
      width: 330px;
      height: 110px;
      display: block;
      margin: 10px;
      overflow: hidden;
    }

    .overlay-custom-content {
      margin: 10px;
    }

    .overview-image-container {
      width: 100%;
      background-color: #fff;
      position: relative;
      padding: 0 0 5px 0;
      min-width: 780px;
    }

    .image-container {
      width: 750px;
      display: block;
      margin: 0 auto 15px auto;
      position: relative;
      overflow: hiddeh;
    }

    .overview-image {
      display: block;
    }

    .video-thumbnail {
      display: inline;
      position: absolute;
      top: 445px;
      right: 0;
      width: 40px;
      height: 30px;
      margin-right: 5px;
      background-color: transparent;
    }

    .video-thumbnail-inside {
      position: relative;
      width: 40px;
      height: 30px;
      margin: 10px 0;
      background: #aaa;
      border-radius: 50% / 10%;
      color: white;
      text-align: center;
      text-indent: .1em;
      cursor: pointer;
    }

    .video-thumbnail-inside:before {
      content: '';
      position: absolute;
      top: 10%;
      bottom: 10%;
      right: -5%;
      left: -5%;
      background: inherit;
      border-radius: 5% / 50%;
    }

    .video-thumbnail-play-icon {
      position: absolute;
    	width: 0;
    	height: 0;
      top: 7px;
      left: 15px;
    	border-top: 8px solid transparent;
    	border-bottom: 8px solid transparent;
    	border-left: 15px solid white;
    }

    .iframe-video-container {
      position: absolute;
      top: 0;
      left: 0;
      background-color: #000;
      width: 750px;
      height: 450px;
    }

    .welcome-banner {
    }

    .welcome-banner * {
      color: #fff;
    }

    .welcome-banner span.welcome-text {
    }

    .dropdown-container {
      width: 200px;
      display: inline-block;
    }

    .header {
      font-weight: bold;
    }

    #welcomeCurtain {
      padding: 10px 10px 0 10px;
      display: none;
      position: absolute;
      top: -20px;
      left: 50%;
      margin-left: -375px;
      background-color: rgba(256, 256, 256, 0.85);
      width: 730px;
      height: 560px;
    }

    #welcomeBanner {
      padding: 10px 10px 0 10px;
      display: none;
      position: absolute;
      top: 0;
      left: 50%;
      margin-left: -375px;
      background-color: var(--overlay-background-rgb);
      width: 730px;
      height: 130px;
    }

    .overlay-gotit-button {
      font-size: 14px;
      display: block;
      margin: 10px auto;
      background-color: rgb(58, 180, 212);
      border: 1px solid #fff;
      width: 200px;
      height: 30px;
    }
  </style>
  <template>
    <px-card header-text="Predix Kits">
      <div class="overview-shell" style="position: relative;">
        <div class="asset-selection" style="width: 600px; margin: 25px auto;">
          Select your asset and see its data flow from edge to cloud:
          <div class="dropdown-container">
            <px-dropdown
              display-value="Select">
              <px-dropdown-content
                extend-dropdown='false'
                max-cont-character-width='10'
                items="[[assets]]">
              </px-dropdown-content>
            </px-dropdown>
          </div>
        </div>
        <div class="overview-image-container">
          <div class="image-container">
            <img class="overview-image" src="/docs/images/SystemDiagram.png" width="750" height="450"></img>
            <p style="text-align: right; margin-right: 60px;">Click on video icon to toggle Predix video.</p>
            <div
              class="component-mouseover"
              id="predixMachine"
              style="left: 43px; top: 106px;"
              data-overlay-position="right"
              >
            </div>
            <div
              class="component-mouseover"
              id="device"
              style="left: 40px; top: 195px;"
              data-overlay-position="right"
              >
            </div>
            <div
              id="assetSelectionContainer"
              style="left: 24px; top: 314px;"
              data-overlay-position="right"
              >
              <img id="assetSelectionImage"></img>
            </div>
            <div
              class="component-mouseover"
              id="industrialAsset"
              style="left: 40px; top: 330px;"
              data-overlay-position="right"
              >
            </div>
            <div
              class="component-mouseover"
              id="eventHub"
              style="left: 198px; top: 224px;"
              data-overlay-position="top"
              >
            </div>
            <div
              class="component-mouseover"
              id="analytics"
              style="left: 269px; top: 117px;"
              data-overlay-position="top"
              >
            </div>
            <div
              class="component-mouseover"
              id="customServices"
              style="left: 435px; top: 332px;"
              data-overlay-position="top"
            >
            </div>
            <div
              class="component-mouseover"
              id="otherServices"
              style="left: 315px; top: 332px;"
              data-overlay-position="top"
            >
            </div>
            <div
              class="component-mouseover"
              id="timeSeries"
              style="left: 462px; top: 116px;"
              data-overlay-position="top"
            >
            </div>
            <div
              class="component-mouseover"
              id="asset"
              style="left: 365px; top: 116px;"
              data-overlay-position="top"
              >
            </div>
            <div
              class="component-mouseover"
              id="edgeManager"
              style="left: 160px; top: 117px;"
              data-overlay-position="top"
              >
            </div>
            <div
              class="component-mouseover"
              id="auth"
              style="left: 415px; top: 30px;"
              data-overlay-position="bottom"
              >
            </div>
            <div
              class="component-mouseover"
              id="mobile"
              style="left: 613px; top: 55px;"
              data-overlay-position="left"
            >
            </div>
            <div
              class="component-mouseover"
              id="apps"
              style="left: 613px; top: 147px;"
              data-overlay-position="left"
            >
            </div>
            <div
              class="component-mouseover"
              id="appDevTools"
              style="left: 613px; top: 292px;"
              data-overlay-position="left"
            >
            </div>

            <div class="overlay overlay-bottom" id="overlayBottom" style="display: none;">
              <div class="overlay-shell">
                <div class="overlay-tip-up"></div>
                <div class="overlay-body">
                  <div class="text-container">
                    <span class="header"></span><br/>
                    <span class="text">overlay bottom</span>
                  </div>
                  <div class="overlay-custom-content"></div>
                </div>
              </div>
            </div>

            <div class="overlay overlay-top" id="overlayTop" style="display: none;">
              <div class="overlay-shell">
                <div class="overlay-tip-down"></div>
                <div class="overlay-body">
                  <div class="text-container">
                    <span class="header"></span><br/>
                    <span class="text">overlay top</span>
                  </div>
                  <div class="overlay-custom-content"></div>
                </div>
              </div>
            </div>

            <div class="overlay overlay-right" id="overlayRight" style="display: none;">
              <div class="overlay-shell">
                <div class="overlay-tip-left"></div>
                <div class="overlay-body">
                  <div class="text-container">
                    <span class="header"></span><br/>
                    <span class="text">overlay right</span>
                  </div>
                  <div class="overlay-custom-content"></div>
                </div>
              </div>
            </div>

            <div class="overlay overlay-left" id="overlayLeft" style="display: none;">
              <div class="overlay-shell">
                <div class="overlay-body">
                  <div class="text-container">
                    <span class="header"></span><br/>
                    <span class="text">overlay left</span>
                  </div>
                  <div class="overlay-custom-content"></div>
                </div>
                <div class="overlay-tip-right"></div>
              </div>
            </div>

            <div id="videoThumbnail" class="video-thumbnail">
              <div id="videoThumbnailInside" class="video-thumbnail-inside">
                <div class="video-thumbnail-play-icon"></div>
              </div>
            </div>

            <div id="iframeVideoContainer" class="iframe-video-container" style="display: none;">
              <iframe id="iframeVideo" width="750" height="450" src="https://www.youtube.com/embed/6mb0gnBUmNk" frameborder="0" allowfullscreen></iframe>
            </div>
          </div>
        </div>
        <div id="welcomeCurtain" class="welcome-curtain">
        </div>
        <div id="welcomeBanner" class="welcome-banner">
          <span class="welcome-text" style="font">Welcome to the Predix Cloud.  Here you bring data from multiple devices and processes together to gain insights and improve operational efficiency.  Select an asset to see its data flow from edge to cloud.</span>
          <button class="overlay-gotit-button" on-tap="welcomeGotIt">Got it</button>
          <div style="margin: 0 auto; width: 170px;">
            <input type="checkbox" id="doNotShowAgainCb" style="display: inline-block; margin-left: 0; margin-top: 5px;">
            <label for="doNotShowAgainCb">Do not show this again</label>
          </div>
        </div>
      </div>
      <px-modal id="eulaModal" btn-modal-positive="I Accept" modal-heading="End User License Agreement">
        <div>
          GE Software Development License Agreement – General Release
          <br/></br>
          THIS SOFTWARE LICENSE AGREEMENT (the “License”) describes the rights granted by the General Electric Company, operating through GE Digital (also referred to as “GE Software”), located at 2623 Camino Ramon, San Ramon, CA 94583 (herein referred to as “Licensor”) to any entity (the “Licensee”) receiving a copy of any of the following GE Digital development materials: Predix DevBox; Predix Reference Application (“RefApp”); Predix WebApp Starter; Predix UI PX components, Predix Mobile, Predix Security utilities; Predix Machine redistributable files, Predix Machine SDK and any other resource available on https://github.com/PredixDev or in the web app in which you are viewing this License. These materials may include scripts, compiled code, supporting components, running sample applications and documentation and are collectively referred to as the “Licensed Programs”. Both Licensor and Licensee are referred to hereinafter as a “Party” and collectively as the “Parties” to this License.
          <br/></br>
          Section 1 – Conditional Grant.
          <br/>
          No Licensee is required to accept this License for use of the Licensed Programs. In the absence of a signed license agreement between Licensor and Licensee specifying alternate terms, any use of the Licensed Programs by the Licensee shall be considered acceptance of these terms. The Licensed Programs are copyrighted and are licensed, not sold, to you. If you are not willing to be bound by the terms of this License, do not install, copy or use the Licensed Programs. If you received this software from any source other than the Licensor, your access to the Licensed Programs is NOT permitted under this License, and you must delete the software and any copies from your systems.
          <br/></br>
          Section 2 – Warranty Disclaimer.
          <br/>
          NO WARRANTIES. LICENSOR AND OUR AFFILIATES, RESELLERS, DISTRIBUTORS, AND VENDORS, MAKE NO WARRANTIES, EXPRESS OR IMPLIED, GUARANTEES OR CONDITIONS WITH RESPECT TO USE OF THE LICENSED PROGRAMS. LICENSEE’S USE OF ALL SUCH PROGRAMS ARE AT LICENSEE’S AND CUSTOMERS’ OWN RISK. LICENSOR PROVIDES THE LICENSED PROGRAMS ON AN “AS IS” BASIS “WITH ALL FAULTS” AND “AS AVAILABLE.” LICENSOR DOES NOT GUARANTEE THE ACCURACY OR TIMELINESS OF INFORMATION AVAILABLE FROM, OR PROCESSED BY, THE LICENSED PROGRAMS. TO THE EXTENT PERMITTED UNDER LAW, LICENSOR EXCLUDES ANY IMPLIED WARRANTIES, INCLUDING FOR MERCHANTABILITY, SATISFACTORY QUALITY, FITNESS FOR A PARTICULAR PURPOSE, WORKMANLIKE EFFORT, AND NON-INFRINGEMENT. NO GUARANTEE OF UNINTERRUPTED, TIMELY, SECURE, OR ERROR-FREE OPERATION IS MADE.
          <br/>
          THESE LICENSED PROGRAMS MAY BE USED AS PART OF A DEVELOPMENT ENVIRONMENT, AND MAY BE COMBINED WITH OTHER CODE BY END-USERS. LICENSOR IS NOT ABLE TO GUARANTEE THAT THE LICENSED PROGRAMS WILL OPERATE WITHOUT DEFECTS WHEN USED IN COMBINATION WITH END-USER SOFTWARE. LICENSEE IS ADVISED TO SAFEGUARD IMPORTANT DATA, TO USE CAUTION, AND NOT TO RELY IN ANY WAY ON THE CORRECT FUNCTIONING OR PERFORMANCE OF ANY COMBINATION OF END-USER SOFTWARE AND THE LICENSED PROGRAMS AND/OR ACCOMPANYING MATERIALS. LICENSEE IS ADVISED NOT TO USE ANY COMBINATION OF LICENSED PROGRAMS AND END-USER PROVIDED SOFTWARE IN A PRODUCTION ENVIRONMENT WITHOUT PRIOR SUITABILITY AND DEFECT TESTING.
          <br/></br>
          Section 3 – Feedback.
          <br/>
          It is expressly understood, acknowledged and agreed that you may provide GE reasonable suggestions, comments and feedback regarding the Software, including but not limited to usability, bug reports and test results, with respect to Software testing (collectively, "Feedback"). If you provide such Feedback to GE, you shall grant GE the following worldwide, non-exclusive, perpetual, irrevocable, royalty free, fully paid up rights:
          <br/>
          a. to make, use, copy, modify, sell, distribute, sub-license, and create derivative works of, the Feedback as part of any product, technology, service, specification or other documentation developed or offered by GE or any of its affiliates (individually and collectively, "GE Products"); b. to publicly perform or display, import, broadcast, transmit, distribute, license, offer to sell, and sell, rent, lease or lend copies of the Feedback (and derivative works thereof) as part of any GE Product; c. solely with respect to Licensee's copyright and trade secret rights, to sublicense to third parties the foregoing rights, including the right to sublicense to further third parties; and d. to sublicense to third parties any claims of any patents owned or licensable by Licensee that are necessarily infringed by a third party product, technology or service that uses, interfaces, interoperates or communicates with the Feedback or portion thereof incorporated into a GE Product, technology or service. Further, you represent and warrant that your Feedback is not subject to any license terms that would purport to require GE to comply with any additional obligations with respect to any GE Products that incorporate any Feedback.
          <br/></br>
          Section 4 – Reserved
          <br/></br>
          Section 5 – Limitation of Liability.
          <br/>
          LIABILITY ARISING UNDER THIS LICENSE, WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE), SHALL BE LIMITED TO DIRECT, OBJECTIVELY MEASURABLE DAMAGES. LICENSOR SHALL HAVE NO LIABILITY TO THE OTHER PARTY OR TO ANY THIRD PARTY, FOR ANY INCIDENTAL, PUNITIVE, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. LIABILITY FOR ANY SOFTWARE LICENSED FROM THIRD PARTIES FOR USE WITH THE SERVICES IS EXPLICILTLY DISCLAIMED AND LIMITED TO THE MAXIMUM EXTENT PERMITTED BY LAW.
          <br/>
          Notwithstanding anything to the contrary, the aggregate liability of Licensor and its suppliers under this License shall not exceed the total amounts paid by Licensee to Licensor hereunder during the one-year period immediately preceding the event which gave rise to the claims.
          <br/></br>
          Section 6 – License.
          <br/>
          A. License Grant. Subject to the terms and conditions of this License, Licensor hereby grants Licensee a worldwide, perpetual, royalty-free, non-exclusive license to:
          <br/>
          install the Licensed Programs on Licensee’s premises, and permit Licensee’s users to use the Licensed Programs so installed, solely for Licensee’s own development, testing, demonstration, staging, and production of Licensee’s own software that makes use of the Licensed Programs in a way that adds substantial functionality not present in the Licensed Programs (the result, a “Licensee Application”);
          <br/>
          permit Licensee to permit third-party hosts (“Hosts”) to install the Licensee Application on such Hosts’ respective premises on Licensee’s behalf, and permit Licensee’s users to access and use the Licensed Programs so installed, solely for Licensee’s own development, testing, demonstration, staging and production purposes
          <br/>
          install the Licensee Application on Licensee’s own premises and permit its own users to use the Licensee Application so installed on the same terms as sub-sections (i) and (ii) above.
          <br/>
          B. For the purposes of this License, the right to “use” the Licensed Programs shall include the right to utilize, run, access, store, copy, test or display the Licensed Programs. No right or license is granted or agreed to be granted to disassemble or decompile any Licensed Programs furnished in object code form, and Licensee agrees not to engage in any such conduct unless permitted by law. Reverse engineering of Licensed Programs provided in object code form is prohibited, unless such a right is explicitly granted by any explicit license subject to sub-section (d) below or as a matter of law, and then only to the extent explicitly permitted. Licensor shall have no obligation to support any such reverse engineering, any product or derivative of such reverse engineering, or any use of the Licensed Programs with any modified versions of any of their components under this License.
          <br/>
          C. Licensee shall ensure that any Licensee Applications incorporate the Licensed Programs in such a way as to prevent third parties (other than Hosts) from viewing the code of the Licensed Programs or gaining access to any programmatic interface or other hidden aspect of the Licensed Programs. Licensee shall also restrict distribution of the Licensed Programs, including as part of Licensee Applications, to only those parties who are notified of, and subject to, an enforceable obligation to refrain from any of the prohibited activities listed herein, such as reverse engineering or disassembling the Licensed Programs.
          <br/>
          D. Use of some open source and third party software applications or components included in or accessed through the Licensed Programs may be subject to other terms and conditions found in a separate license agreement, terms of use or “Notice” file located at the download page. The Licensed Programs are accompanied by additional software components solely to enable the Licensed Programs to operate as designed. Licensee is not permitted to use such additional software independently of the Licensed Programs unless Licensee secures a separate license for use from the named vendor. Do not use any third party code unless you agree with the applicable license terms for that code.
          <br/>
          E. Data Anonymization.  Data may be collected from multiple users and sources and displayed as you use running sample applications.  Personal data will not be displayed to other users of a running sample application.  Aggregated and anonymized information may be displayed to all users of running sample applications.  For example, locations of assets entered by multiple users of the running sample application may be displayed together on a map.  Another example may be to aggregate data across several users or assets in the running sample application to show how analytic results can help improve processes.
          <br/>
          F. Title. Title to and ownership of the Licensed Programs shall at all times remain with Licensor.
          <br/></br>
          Section 7 – Termination.
          <br/>
          A) The Licensor reserves the right to cease distribution and grant of further licenses to any or all of the Licensed Programs at any time in its sole discretion.
          <br/>
          B) The Licensor reserves the right to delete persisted data in running sample applications after 3 days of storage.  This right of delete does not extend to data you store when hosting sample code in your own hosted servers, systems or databases.
          <br/>
          C) The Licensor reserves the right to deny access to running sample applications after 30 days of use. For example, use of a system for Free for 30 days might be offered, after 30 days you will need to move to the paid version of the system. This right of denial does not extend to apps you create when using sample code and running in your own hosted servers, systems or databases.
          <br/>
          D) The Licensor reserves the right to at any time and at its sole discretion provide updated versions of any or all of the Licensed Programs that supercede and replace the prior version of that Licensed Program.
          <br/>
          E) Your license rights under Section 6 are effective until terminated as described below:
          <br/>
          i) This license and all rights under it will terminate or cease to be effective without notice if Licensee breaches the terms of the License and does not correct or remedy such breach promptly.
          <br/>
          ii) Notwithstanding the foregoing, Licensee may terminate this License at any time for any reason or no reason by providing the Licensor written notice thereof.
          <br/>
          F) Upon any expiration or termination of this License, the rights and licenses granted to you under this License shall immediately terminate, and you shall immediately cease using and delete the Licensed Programs. Licensee Applications based upon the Licensed Programs (see Section 6(a) above) are not subject to this limitation.
          <br/>
          In the event of any expiration or termination of this Licensee, any Confidentiality provision, disclaimers of GE’s representations and warranties, choice of applicable law and limitations of GE’s liability shall survive.
          <br/></br>
          Section 8 – Applicable Law.
          <br/>
          The License shall be governed by and interpreted in accordance with the substantive law of the State of California, U.S.A., excluding its conflicts of law provisions, and by the courts of that state.
          </pre>
        </div>
      </px-modal>
    </px-card>
  </template>
  <script>
    Polymer({
      is: 'over-view',

      listeners: {
        'px-dropdown-value-changed': 'assetSelected'
      },

      properties: {
        associatedAsset: {},

        //Mock assets; assets list should eventually be fetched from a service
        assets : {
          type: Array,
          value: [
            { 'key': '1',
              'val': 'Aircraft',
              'imageURL': '/docs/images/PredixAsset_Aircraft.png'
            },
            { 'key': '2',
              'val': 'Hospital',
              'imageURL': '/docs/images/PredixAsset_Hospital.png'
            },
            { 'key': '3',
              'val': 'Locomotive',
              'imageURL': '/docs/images/PredixAsset_Locomotive.png'
            },
            { 'key': '4',
              'val': 'Wind Turbine',
              'imageURL': '/docs/images/PredixAsset_Windmill.png'
            }
          ]
        },
        mouseOverDetails: {
          'industrialAsset': {
            'text': 'Your Industrial Asset in Predix is a Digital Twin of your physical asset at your Edge site.  You can download a copy of this application to add new features, run Analytics and realize operational efficiencies.  Click to view data from the Device associated to this asset.'
            , 'header': "Industrial Asset"
            , 'learnMoreURL': '/#/kit-data'
            , 'newTab': false
            , 'isAssetSelector': false
          },
          'device': {
            'text': 'A wide variety of devices can run Predix Machine software to monitor and react to your Industrial Asset, aggregate data from your site, and push to the Predix Cloud for industrial scale analytics.'
            , 'header': "Device"
            , 'learnMoreURL': '/#/kit-data'
            , 'newTab': false
            , 'isAssetSelector': true

          },
          'predixMachine': {
            'text': 'Predix Machine unlocks the potential of Edge Analytics, Edge Filtering and much more.  Click to learn how to leverage Predix Machine to optimize your operations.'
            , 'header': 'Predix Machine'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/edge_software_and_services/machine/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'eventHub': {
            'text': 'Real time messaging across your Digital Twin ecosystem is critical.  From data ingestion to analytics, Event Hub streaming services keep your processes running efficiently.  Click to learn more.'
            , 'header': 'Event Hub'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/data_management/event_hub/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'asset': {
            'text': 'Predix Asset is a fast, scalable noSQL store that provides a full view across your assets.  Asset is the system-of-record for managing your Digital Twin ecosystem, storing Analytic inputs, aggregating results and managing core asset models.  Click to learn more.'
            , 'header': 'Asset'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/data_management/asset/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'timeSeries': {
            'text': 'Data that is diverse, high velocity and high volume is the inevitable use case of the Industrial Internet.  Predix Time Series stores data at cloud scale and provides a straightforward REST API, allowing your Analytics to unlock the potential of asset optimization.  Click to learn more.'
            , 'header': 'Time Series'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/data_management/time_series/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'analytics': {
            'text': 'The realization of continuously updating your Digital Twin is where Predix Analytics shines.  With a huge library of orchestrated analytics you can realize efficiencies across your assets, your plant, your fleets, your people and your processes. Click to learn more.'
            , 'header': 'Analytics'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/analytics_services/analytics_framework/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'customServices': {
            'text': 'Predix architecture enables you to create your own custom services, leveraging the security and performance of the Predix platform.  This app is downloadable for further customization.  Visit the About page to Install a Personal Copy of this app and to see the code from this app.  Click to learn more.'
            , 'header': 'Custom Services'
            , 'learnMoreURL': 'https://www.predix.io/resources/tutorials/journey.html#2041'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'otherServices': {
            'text': 'Predix offers a wide variety of services and analytics to help you build your Industrial Internet application.  Subscribe to any of these services from the Predix catalog.  Click to learn more.'
            , 'header': 'Custom Services'
            , 'learnMoreURL': 'https://www.predix.io/resources/tutorials/journey.html#2041'
            , 'isAssetSelector': false
            , 'newTab': true
          },
          'auth': {
            'text': 'Security permeates the entire Predix ecosystem.  From Edge devices to Edge Manager and the Cloud, your industrial processes are safe and secure.  Click to learn more.'
            , 'header': 'Authentication'
            , 'learnMoreURL': 'https://docs.predix.io/en/service'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'edgeManager': {
            'text': 'Predix EdgeManager provides a single point of entry for deploying and monitoring remote devices.  EdgeManager allows you to administer your applications and configuration files at both a device and a fleet level, helping you keep your device software current.  Click to learn more.'
            , 'header': 'Edge Manager'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/edge_software_and_services/edge_manager/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'apps': {
            'text': 'Predix provides pre-built, responsive web application starter kits that accelerate frontend development.  These applications are based on leading frontend technology and come with server-side features for easy integration with Predix services.  Click to learn more.'
            , 'header': 'Web Applications'
            , 'learnMoreURL': 'https://github.com/PredixDev/predix-webapp-starter'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'mobile': {
            'text': 'Predix Mobile provides a Backend-as-a-Service to Industrial Internet mobile applications built with the Predix Mobile SDK.  Use the Mobile SDK to interact with the Mobile service components and your Mobile application code.  Click to learn more.'
            , 'header': 'Mobile'
            , 'learnMoreURL': 'https://docs.predix.io/en-US/content/service/mobile/mobile_overview/'
            , 'newTab': true
            , 'isAssetSelector': false
          },
          'appDevTools': {
            'text': 'Predix provides a collection of UI components, sample web application code, and development tools to build the front end of your Industrial Internet application.  Click to learn more.'
            , 'header': 'Application Development Tools'
            , 'isAssetSelector': false
            , 'learnMoreURL': 'https://www.predix.io/resources/tutorials/tutorial-details.html?tutorial_id=2101&tag=2100&journey=Predix%20Web%20App%20Starter&resources=2101,1544,2225,1549,1736,2273'
            , 'newTab': true
          }
        }
        , videoIsVisible: false
      },

      assetSelected: function(evt) {
        var assetList = this.properties.assets.value, eventDetails = evt.detail;
        var selectedImage = Polymer.dom(this.root).querySelector('#assetSelectionImage');
        for (var i = 0, l = assetList.length; i < l; i++) {
          if (assetList[i].key === eventDetails.key) {
            Polymer.dom(this.root).querySelector('#assetSelectionContainer').style.backgroundColor = 'rgba(255, 255, 255, 1)';
            selectedImage.src = assetList[i].imageURL;
            selectedImage.style.border = '2px solid rgb(58, 180, 212)';
            selectedImage.style.borderRadius = '10px';
            break;
          }
        }
      },

      welcomeGotIt: function() {
        var doNotShow = Polymer.dom(this.root).querySelector('#doNotShowAgainCb');
        if (doNotShow.checked === true) {
          localStorage.setItem('kitCloud.doNotShowWelcome', true);
        }
        Polymer.dom(this.root).querySelector('#welcomeBanner').style.display = 'none';
        Polymer.dom(this.root).querySelector('#welcomeCurtain').style.display = 'none';
      },

      getOverlayElement: function(overlayPosition) {
        var elem = null, elemID = '';
        switch (overlayPosition) {
          case 'top':
            elemID = 'overlayTop';
            break;
          case 'bottom':
            elemID = 'overlayBottom';
            break;
          case 'right':
            elemID = 'overlayRight';
            break;
          case 'left':
            elemID = 'overlayLeft';
            break;
          default:
            elemID = 'overlayBottom';
        }
        return document.querySelector('#' + elemID);
      }.bind(this),

      getOverlayCoords: function(element, overlayID) {
        var coords = {};
        switch(overlayID) {
          case 'overlayTop':
            coords.top = parseInt(element.style.top, 10) - 160 + 'px';
            coords.left = parseInt(element.style.left, 10) + 44 - 195 + 'px';
            break;
          case 'overlayBottom':
            coords.top = parseInt(element.style.top, 10) + 88 + 'px';
            coords.left = parseInt(element.style.left, 10) + 44 - 195 + 'px';
            break;
          case 'overlayLeft':
            coords.top = parseInt(element.style.top, 10) + 44 - 80 + 'px';
            coords.left = parseInt(element.style.left, 10) - 390 + 'px';
            break;
          case 'overlayRight':
            coords.top = parseInt(element.style.top, 10) + 44 - 80 + 'px';
            coords.left = parseInt(element.style.left, 10) + 88 + 'px';
            break;
        }
        return coords;
      }.bind(this),

      _showEula: function() {
        if (!localStorage.getItem('kitCloud.eulaAccepted')) {
          this.$.eulaModal.modalButtonClicked();
        }
      },

      _acceptEula: function() {
        localStorage.setItem('kitCloud.eulaAccepted', true);
      },

      ready: function() {
        var hoverComponents = Polymer.dom(this.root).querySelectorAll('.component-mouseover');
        var component, videoThumbnail, welcomeDisplayVal;
        window.predix = window.predix || {};
        var doNotShowWelcome = localStorage.getItem('kitCloud.doNotShowWelcome');
        if (typeof doNotShowWelcome !== 'undefined' && doNotShowWelcome === 'true') {
          welcomeDisplayVal = 'none';
        }
        else {
          welcomeDisplayVal = 'block';
        }
        Polymer.dom(this.root).querySelector('#welcomeBanner').style.display = welcomeDisplayVal;
        Polymer.dom(this.root).querySelector('#welcomeCurtain').style.display = welcomeDisplayVal;

        this._showEula();
        for (var i=0; i < hoverComponents.length; i++) {
          component = hoverComponents[i];
          component.addEventListener(
            'mouseover',
            function(event) {
              var hoverComponent = event.target;
              var mouseOverDetails = this.properties.mouseOverDetails[event.target.id];
              var overlayElem = this.getOverlayElement(hoverComponent.dataset.overlayPosition);
              overlayCoords = this.getOverlayCoords(hoverComponent, overlayElem.id);
              overlayElem.style.top = overlayCoords.top;
              overlayElem.style.left = overlayCoords.left;
              hoverComponent.dataset.overlayElemID = overlayElem.id;
              overlayElem.querySelector('span.text').innerHTML = mouseOverDetails.text;
              overlayElem.querySelector('span.header').innerHTML = mouseOverDetails.header;
              overlayElem.style.display = 'inline';
            }.bind(this)
          );
          component.addEventListener(
            'mouseout',
            function(event) {
              var hoverComponent = event.target;
              document.querySelector('#' + hoverComponent.dataset.overlayElemID).style.display = 'none';
            }.bind(this)
          );
          component.addEventListener(
            'click',
            function(event) {
              var mouseOverDetails = this.properties.mouseOverDetails[event.target.id];
              var newSelectionIndex = 0;
              if (mouseOverDetails.isAssetSelector) {
                if (this.properties.associatedAsset.name) {
                  for (var i = 0, l = availableAssetUL.children.length; i < l; i++) {
                    if (this.properties.associatedAsset.name === availableAssetUL.children[i].innerHTML) {
                      availableAssetUL.children[i].style.fontWeight = 'normal';
                      newSelectionIndex = (i + 1) % l;
                      break;
                    }
                  }
                }
                availableAssetUL.children[newSelectionIndex].style.fontWeight = 'bold';
                this.properties.associatedAsset.name = availableAssetUL.children[newSelectionIndex].innerHTML;
                Polymer.dom(this.root).querySelector('#assetSelectionContainer').style.backgroundColor = 'rgba(255, 255, 255, 1)';
                Polymer.dom(this.root).querySelector('#assetSelectionImage').src = this.properties.assets[newSelectionIndex].imageURL;
                window.predix.selectedAssetImageURL = this.properties.assets[newSelectionIndex].imageURL;
              }
              else {
                var url = this.properties.mouseOverDetails[event.target.id].learnMoreURL;
                if (mouseOverDetails.newTab) {
                  var win = window.open(url, '_blank');
                  win.focus();
                } else {
                  window.location = url;
                }
              }
            }.bind(this)
          )
        };
        videoThumbnail = Polymer.dom(this.root).querySelector('#videoThumbnail');
        videoThumbnail.addEventListener(
          'click',
          function() {
            var iframeVideoContainer = this.$.iframeVideoContainer;
            var iframeVideo = this.$.iframeVideo;
            var videoThumbnailInside = this.$.videoThumbnailInside;
            if (this.properties.videoIsVisible) {
              iframeVideoContainer.style.display = 'none';
              iframeVideo.src = iframeVideo.src;
              videoThumbnailInside.style.background = '#ddd';
              this.properties.videoIsVisible = false;
            }
            else {
              iframeVideoContainer.style.display = 'inline';
              videoThumbnailInside.style.background = 'rgb(58, 180, 212)';
              this.properties.videoIsVisible = true;
            }
          }.bind(this)
        );

        // A temporary way to reset the 'do not show again' flag in welcome banner
        // to avoid having to clear cache through browser
        videoThumbnail.addEventListener(
          'dblclick',
          function() {
            localStorage.removeItem('kitCloud.doNotShowWelcome');
          }
        );

        this.$.eulaModal.addEventListener('btnModalPositiveClicked', function() {
          this._acceptEula();
        }.bind(this));
      }
    });
  </script>
</dom-module>
